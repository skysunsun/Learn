# Jdata比赛总结

接触这个比赛比较晚了，开赛都快一个月了，才开始弄这个算法。而且还有其他的事情，以至于后面都没有时间了。但是在这个比赛中还是学到很多的东西，主要是对这个比赛有了一个大致的了解。其次就是对Pandas有了更深的理解。

以前对pandas的了解只是停留在书本知识，记得以前看过一本《利用python进行数据分析》，果然很多东西还是用到了实际的项目中才能更深入的了解。

对于这个比赛，主要写一写自己一路走来的一些心路历程吧！

## 数据分析

其实我感觉这个是比赛中最重要的，而且我也觉得，不管在那个方面，做好前期的数据分析，真的就成功了一大半了。

这个比赛有行为表，用户表，商品表，评论表，商店表，给的数据算比较全面了。

拿到这个的时候，想的是对每个表中的特征进行显著性分析，但是好像后面想了想，时间好像来不及了。以至于就没走这个路了，然后根据自己买东西看重的指标进行特征筛选

我准备选的有特征有：
用户数据，行为表，商品表，评论表，但是不管谁和评论表合并，最后合出来的‘type’都变了，至今不知道为什么。。。

因此放弃了评论表，只有三个表了，但是在在自己心中一直觉得评论数据挺重要的，因为自己买东西的时候还是会看一看评论表的。但是天不随人愿啊。

接着就是表的合并了，我三个表放在colab上合并，直接卡崩了。还是内存太大了。


顺便提一下数据读取减少内存的函数：


话说是kaggle上大佬写的，但是自己并不知道原理。

合好了，就进行数据的保存，这里也有个问题，就是你合并的时候会自动添加一列索引，所以要在保存的时候把索性去掉


然后就是在合并的表中找出需要的特征，分别为特征和标签，然后又存了两个表



其实这个在表合并的时候直接选取就不必重复读取数据了，减少时间呀




## 建模部分



既然特征有了，标签也有了，那就直接用现有的模型来做吧！

在这部分中，因为实习项目中涉及到回归，所以想用回归来做，于是荡了一份sklean的回归代码，直接拿来用，但是这里就出现了一个问题就是，行为表中的时间特征是字符串类型的，没法直接用，所以得转换，百度了转时间的函数


我记得第一用这个函数的好好的，但是后面用这个函数就不管用了，刚开始以为是原始数据被我搞坏了，所以为把原始数据重新解压了，有试了一下，但是还是不行，之后一直在为这个
问题苦恼，因为后面要预测，特征中变了的数只有时间这个变量，所以这个特征不能舍去，但是这个特征是有问题的，这个把我给愁死了
试了很多方法

之后想到排除，先转字符串，然后根据字符串的长度判断是否符合要求，这个方法生效了，但是同样‘type’的值变了，而且数据量急剧下降，这个方法是有问题的！并且也不知道问题在哪里，代码如下

这个方法放弃了之后，想到正则匹配，但是600W的数据跑了一天都没跑完，不应该啊，不知道为什么，for循环有这么慢么？问了下室友，说是用apply函数，但是看到这个效率直接放弃了，后面终于找到一个靠谱的方法，具体来说


解决了这个问题之后就是模型的训练了，在时间数据出现问题之前，我把几个模型的训练，预测都写完了，但是后面发现预测的有问题，然后发现了时间特征的问题，但后面时间特征正确了之后，几个就几个模型，跑了1天也没跑完，这特么怎么这么慢。。。。。怀疑人生

然后转念一想，这个只是一个买与不买的问题，典型的二分类问题啊，但是行为表中明确说了有好几种行为，但是我去查了下数据，根本就没有其他的行为，只有浏览和下单行为。。。。。然后果断放弃了回归算法，然后去找了一份sklearn的分类


同样是跑了好久不出结果，当我只跑一个，跑出来之后，预测也是跑了好久，然后我就放弃这个，因为这个时间太久了，时间根本不够用。

关于预测用的数据，我是用的训练数据，然后改变了时间特征的值，作为预测数据。


后面就有了一个叫做XGB的东西跑进了我的视野，然后就用这个做了，不得不说，神器啊，之前没有接触过比赛，什么都不懂，只是按照自己的想法来，后面google了一下xgb之后，大佬们做预测都是用这个，涨知识了，关键是快，看看后面要好好补一补这个知识了。

使用了交叉验证，训练的正确率有90%但是到了线上1%都不到，这特么就尴尬了，后面就是调参之路了，我参考了这个

但是渐渐的时间就截止了。。。。。。。。。我参数都没调好啊

已有的数据效果并不是很好

在这期间自己也试过一些奇葩的方法，比如把有购买的用户跳出来，然后分百分比随机取值，但是这个效果同样不好，效果1%都不到，后面跑过别人的一个baseline，这个baseline只是写了个规则，根据这个规则来判断买还是不买，但是效果能有2.3%。。。。。这个规则还简单。这个比自己去选特征，建模，简单多了 而且效果还好。。。。。。感觉后面这种比赛，想一个好的规则，就会有一个不错的效果了。。。。哎

## 总结

虽然效果不咋滴，但是算是这个比赛入门了！Jdata这个比赛好像是一年一次呢！明年还有机会！
